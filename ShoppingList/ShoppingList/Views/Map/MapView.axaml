<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             xmlns:vm="clr-namespace:ShoppingList.ViewModels.Map"
             xmlns:converters="clr-namespace:ShoppingList.Converters"
             x:DataType="vm:MapViewModel"
             x:Class="ShoppingList.Views.Map.MapView">
  <UserControl.Resources>
    <converters:SegmentTypeToColorConverter x:Key="SegmentTypeToColorConverter"/>
    <converters:SegmentTypeToTextConverter x:Key="SegmentTypeToTextConverter"/>
  </UserControl.Resources>
  <Grid RowDefinitions="Auto, *">

    <Grid Grid.Row="0" Margin="20 30">
      <Button VerticalAlignment="Center" Classes="trans_bg" HorizontalAlignment="Left"
              Command="{Binding GoBackCommand}">
        <PathIcon Data="{StaticResource arrow_left_regular}" Classes="maxi"/>
      </Button>
      <TextBlock Classes="h1" Text="{Binding Name}" HorizontalAlignment="Center"
                 VerticalAlignment="Center" TextWrapping="Wrap"/>
      <Button VerticalAlignment="Center" HorizontalAlignment="Right"
              Command="{Binding StoreSettingsPageCommand}">
        <PathIcon Data="{StaticResource options_regular}" Classes="maxi white_foreground"/>
      </Button>
    </Grid>

    <Grid Grid.Row="1" VerticalAlignment="Stretch">

      <Grid ColumnDefinitions="5*, *, Auto" Margin="20" VerticalAlignment="Bottom"
            ZIndex="1">

        <Border Grid.Column="0" Classes="mainbg_floater">
          <ItemsControl ItemsSource="{Binding SegmentTypes}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal"/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <StackPanel Orientation="Horizontal" Spacing="8" Margin="4 0">
                  <Border Width="20" Height="20"
                          Background="{Binding, Converter={StaticResource SegmentTypeToColorConverter}}"/>
                  <TextBlock VerticalAlignment="Center"
                             Text="{Binding, Converter={StaticResource SegmentTypeToTextConverter}}"/>
                </StackPanel>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </Border>

        <Border Grid.Column="2" Classes="mainbg_floater">
          <StackPanel Spacing="10" HorizontalAlignment="Center">
            <Button Click="ZoomInButton_Click">
              <PathIcon Data="{StaticResource zoom_in_regular}" Classes="maxi white_foreground"/>
            </Button>
            <Button Click="ZoomOutButton_Click">
              <PathIcon Data="{StaticResource zoom_out_regular}" Classes="maxi white_foreground"/>
            </Button>
          </StackPanel>
        </Border>
      </Grid>

      <Border Margin="10">
        <ScrollViewer HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                      VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Hidden">
          <Canvas x:Name="MapCanvas" RenderTransformOrigin="0 0" HorizontalAlignment="Stretch"
                  VerticalAlignment="Stretch">
            <Canvas.RenderTransform>
              <TransformGroup>
                <ScaleTransform ScaleX="1" ScaleY="1" />
                <TranslateTransform X="0" Y="0" />
              </TransformGroup>
            </Canvas.RenderTransform>
          </Canvas>
        </ScrollViewer>
      </Border>

    </Grid>

  </Grid>
</UserControl>
